<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover"/>
<title>Tap to Annoy (harmless)</title>
<style>
  :root{--bg:#0b1020;--card:rgba(255,255,255,0.06);}
  html,body{height:100%;margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,"Helvetica Neue",Arial;}
  body{background:linear-gradient(160deg,#0b1020,#122034);color:#fff;display:flex;align-items:center;justify-content:center}
  .wrap{width:100%;max-width:820px;padding:20px;box-sizing:border-box;text-align:center}
  .card{background:var(--card);padding:22px;border-radius:14px;box-shadow:0 6px 20px rgba(2,6,23,0.6)}
  h1{margin:0 0 8px;font-size:20px}
  p{margin:0 0 14px;color:rgba(255,255,255,0.85)}
  #start{font-size:18px;padding:14px 18px;border-radius:12px;border:0;background:#ff6b6b;color:#fff;cursor:pointer}
  #stop{font-size:14px;padding:10px 12px;border-radius:10px;border:0;background:#666;color:#fff;cursor:pointer;margin-left:10px}
  .bubble{position:fixed;pointer-events:none;font-size:18px;user-select:none;will-change:transform,opacity}
  .toast{position:fixed;left:50%;transform:translateX(-50%);bottom:22px;padding:10px 14px;border-radius:12px;background:rgba(255,255,255,0.12);backdrop-filter:blur(6px);font-weight:600}
  .credits{font-size:12px;opacity:.8;margin-top:8px}
</style>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <h1>Tap to start the (harmless) prank ‚ú®</h1>
      <p>Open on your friend's phone and ask them to tap <strong>Start</strong>. Everything begins after the tap ‚Äî no popups, no messages, just local fun.</p>
      <div>
        <button id="start">Start Nice Annoyance</button>
        <button id="stop" style="display:none">Stop</button>
      </div>
      <div class="credits">Works best on modern mobile browsers (Chrome/Safari). Vibration & fullscreen may require permission on some phones.</div>
    </div>
  </div>

<script>
/* ------ configuration ------ */
const phrases = [
  "hey bestie! üòú","you there? üëÄ","ping! ping!","quick question!",
  "pineapple on pizza? üçç","stop ignoring me üòÖ","call me pls üìû",
  "this is your friendly nudge üíå","did you leave the milk out?"
];
const bubbleIntervalMs = 450;
const toastIntervalMs = 1200;
const vibePattern = [80,40,80]; // vibration pattern

/* ------ state ------ */
let bubbleTimer = null, toastTimer = null, running = false;
const startBtn = document.getElementById('start');
const stopBtn = document.getElementById('stop');

/* ------ helpers ------ */
function spawnBubble() {
  const el = document.createElement('div');
  el.className = 'bubble';
  // random emoji or phrase
  el.textContent = phrases[Math.floor(Math.random()*phrases.length)];
  const size = 16 + Math.random()*18;
  el.style.fontSize = size + 'px';
  // start near bottom random x
  el.style.left = (5 + Math.random()*90) + 'vw';
  el.style.top = (80 + Math.random()*15) + 'vh';
  el.style.opacity = '1';
  el.style.transform = `translateY(0) rotate(${Math.random()*30-15}deg)`;
  document.body.appendChild(el);
  // animate with JS (so mobile handles better)
  const rise = 110 + Math.random()*80;
  const duration = 3500 + Math.random()*2000;
  const start = performance.now();
  function frame(t) {
    const p = Math.min(1,(t-start)/duration);
    el.style.transform = `translateY(${-rise * p}vh) rotate(${(p*20-10)}deg) scale(${1 + p*0.12})`;
    el.style.opacity = String(1 - p);
    if (p < 1) requestAnimationFrame(frame);
    else el.remove();
  }
  requestAnimationFrame(frame);
}

function showToast(text) {
  const t = document.createElement('div');
  t.className = 'toast';
  t.textContent = text;
  document.body.appendChild(t);
  setTimeout(()=> t.remove(), 1600);
}

// short beep using WebAudio (user gesture required)
function playBeep() {
  try {
    const ctx = new (window.AudioContext || window.webkitAudioContext)();
    const o = ctx.createOscillator();
    const g = ctx.createGain();
    o.type = 'sine';
    o.frequency.value = 880 * (1 + Math.random()*0.25);
    g.gain.value = 0.0001;
    o.connect(g);
    g.connect(ctx.destination);
    const now = ctx.currentTime;
    // quick envelope
    g.gain.setValueAtTime(0.0001, now);
    g.gain.linearRampToValueAtTime(0.05, now + 0.02);
    o.start(now);
    g.gain.exponentialRampToValueAtTime(0.0001, now + 0.18);
    o.stop(now + 0.18);
    setTimeout(()=> ctx.close(), 400);
  } catch(e) {
    // ignore if blocked
  }
}

function tryVibrate() {
  if (navigator.vibrate) navigator.vibrate(vibePattern);
}

/* ------ start/stop control ------ */
async function start() {
  if (running) return;
  running = true;
  startBtn.style.display = 'none';
  stopBtn.style.display = '';
  // try fullscreen for immersive effect (may be blocked on iOS)
  try { 
    const el = document.documentElement;
    if (el.requestFullscreen) await el.requestFullscreen();
    else if (el.webkitRequestFullscreen) el.webkitRequestFullscreen();
  } catch(e){ /* ignore */ }

  // play a beep + vibrate once
  playBeep();
  tryVibrate();
  showToast("Let's go! üéâ");

  // periodic bubbles & toasts
  bubbleTimer = setInterval(spawnBubble, bubbleIntervalMs);
  toastTimer = setInterval(()=> showToast(phrases[Math.floor(Math.random()*phrases.length)]), toastIntervalMs);

  // small repeating vibe + beep loop (friendly)
  window._annoyLoop = setInterval(()=>{
    tryVibrate();
    playBeep();
  }, 2800);
}

function stop() {
  running = false;
  startBtn.style.display = '';
  stopBtn.style.display = 'none';
  clearInterval(bubbleTimer); bubbleTimer = null;
  clearInterval(toastTimer); toastTimer = null;
  if (window._annoyLoop) { clearInterval(window._annoyLoop); window._annoyLoop = null; }
  // exit fullscreen if possible
  try {
    if (document.exitFullscreen) document.exitFullscreen();
    else if (document.webkitExitFullscreen) document.webkitExitFullscreen();
  } catch(e){}
  showToast("Stopped ‚Äî all good üôÇ");
}

startBtn.addEventListener('click', start);
stopBtn.addEventListener('click', stop);

/* stop if user navigates away */
document.addEventListener('visibilitychange', ()=>{
  if (document.hidden) stop();
});
</script>
</body>
</html>
